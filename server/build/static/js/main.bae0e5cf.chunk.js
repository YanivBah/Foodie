(this["webpackJsonpnew-client"]=this["webpackJsonpnew-client"]||[]).push([[0],{176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},180:function(e,t,n){},181:function(e,t,n){},182:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},185:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},188:function(e,t,n){},189:function(e,t,n){},190:function(e,t,n){},191:function(e,t,n){},192:function(e,t,n){},193:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},196:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(54),c=n.n(s),i=n(3),o=(n(60),n(0)),l=function(e){var t=e.details,n=t.header,a=t.text,r=t.type;return Object(o.jsxs)("div",{className:"alert ".concat(r),children:[Object(o.jsxs)("div",{className:"heading",children:["red"===r&&Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"fill-current w-5 pt-1",viewBox:"0 0 24 24",children:Object(o.jsx)("path",{d:"M12 1l-12 22h24l-12-22zm-1 8h2v7h-2v-7zm1 11.25c-.69 0-1.25-.56-1.25-1.25s.56-1.25 1.25-1.25 1.25.56 1.25 1.25-.56 1.25-1.25 1.25z"})}),"green"===r&&Object(o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"fill-current w-5 pt-1",viewBox:"0 0 24 24",children:Object(o.jsx)("path",{d:"M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-1.959 17l-4.5-4.319 1.395-1.435 3.08 2.937 7.021-7.183 1.422 1.409-8.418 8.591z"})}),Object(o.jsx)("h3",{children:n})]}),Object(o.jsx)("div",{children:a})]})},d=Object(a.createContext)(null),u=n(9),j=n(6),h=n(4),p=n.n(h),b=n(8),m=n(7),x=n.n(m),g=(n(81),function(e){var t=e.recipe,n=e.noName;return Object(o.jsx)("div",{className:"recipe-preview",children:Object(o.jsx)(u.c,{to:"/recipe/".concat(t._id),children:Object(o.jsxs)("div",{className:"recipe-preview--image",children:[Object(o.jsx)("img",{src:"/api/recipe/image?id=".concat(t._id),alt:"recipe"}),Object(o.jsxs)("div",{className:"title",children:[Object(o.jsx)("h3",{children:t.title}),!n&&Object(o.jsxs)("span",{children:["By ",t.owner.username]})]})]})})})}),O=(n(90),n(91),function(e){var t=e.text,n=e.onClick;return Object(o.jsx)("button",{className:"button",onClick:n,children:t})}),f=(n(92),function(){var e=Object(a.useContext)(d).user;return Object(o.jsxs)("div",{className:"hero",children:[Object(o.jsx)("div",{className:"hero-bg"}),Object(o.jsxs)("div",{className:"hero-content",children:[Object(o.jsxs)("div",{className:"hero-text",children:[Object(o.jsx)("h1",{children:e.get?"What's cooking?":"Join our community!"}),!e.get&&Object(o.jsx)("p",{children:Object(o.jsx)(u.b,{to:"/signup",children:"Click here to signup"})}),Object(o.jsxs)("ul",{children:[!e.get&&["Interact with other people","Share your recipes","Rate other's recipes"].map((function(e,t){return Object(o.jsx)("li",{children:e},t)})),e.get&&["Find what to cook for today","Tell users how it went"].map((function(e,t){return Object(o.jsx)("li",{children:e},t)}))]})]}),Object(o.jsx)("div",{className:"hero-image",children:Object(o.jsx)("img",{src:"./assets/hero-new.svg",alt:"man sitting"})})]})]})}),v=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(j.f)(),c=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/recipe/recent?limit=6&skip=0");case 2:t=e.sent,n=t.data,r(n.recipes);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){c()}),[]),Object(o.jsxs)("div",{className:"homepage",children:[Object(o.jsx)(f,{}),Object(o.jsxs)("div",{className:"recent",children:[Object(o.jsx)("h2",{children:"Recent Recipes"}),Object(o.jsx)("div",{className:"grid-preview",children:n.map((function(e){return Object(o.jsx)(g,{recipe:e},e._id)}))}),Object(o.jsx)(O,{text:"See All",onClick:function(){return s.push("/recipes")}})]})]})},w=n(5),C=(n(93),function(e){var t=e.name,n=e.label,a=e.type,r=e.placeholder,s=e.values,c=e.onChange,i=e.whatToChange;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{className:"label",htmlFor:t,children:n}),Object(o.jsx)("input",{id:t,className:"input",type:a,placeholder:r,value:s[i],onChange:function(e){var t=Object(w.a)({},s);t[i]=e.target.value,c(t)}})]})}),N=(n(94),function(){var e=Object(a.useContext)(d),t=e.user,n=e.alertPopup,r=Object(a.useState)({username:"",password:""}),s=Object(i.a)(r,2),c=s[0],l=s[1],h=Object(j.f)(),m=function(){var e=Object(b.a)(p.a.mark((function e(a){var r,s,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={email:c.username,password:c.password},e.prev=2,e.next=5,x.a.post("/api/user/login",r);case 5:s=e.sent,i=s.data,t.set(i),n("Success!","Login was successful!","green",1500),h.push("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n("Sorry",e.t0.response.data,"red",1500);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"login",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Sign in to your account"}),Object(o.jsxs)("p",{children:["Don't have an account? ",Object(o.jsx)(u.b,{to:"/signup",children:"Signup now."})]})]}),Object(o.jsxs)("form",{children:[Object(o.jsx)(C,{name:"username",label:"Username / E-mail",type:"text",placeholder:"Your username or e-mail",values:c,onChange:l,whatToChange:"username"}),Object(o.jsx)(C,{name:"password",label:"Password",type:"password",placeholder:"Your password",values:c,onChange:l,whatToChange:"password"}),Object(o.jsx)(O,{text:"Login",onClick:m})]})]})}),k=n(19),y=n.n(k),S=(n(95),n(96),function(e){var t=e.name,n=e.values,a=e.onChange,r=e.whatToChange,s=e.text;e.type;return Object(o.jsxs)(o.Fragment,{children:[n[r].preview&&Object(o.jsx)("img",{src:n.file.preview,alt:"Your uploaded img",className:"image-preview"}),Object(o.jsx)("input",{type:"file",id:t,onChange:function(e){if(e.target.files.length){var t=Object(w.a)({},n);t[r].raw=e.target.files[0],t[r].preview=URL.createObjectURL(e.target.files[0]),a(t)}},className:"inputfile"}),Object(o.jsx)("label",{htmlFor:t,children:n.file.raw?"Upload different":s})]})}),T=function(){var e=Object(a.useContext)(d).alertPopup,t=Object(j.f)(),n=Object(a.useState)({username:"",email:"",password:"",repeatPassword:"",file:{raw:null,preview:null}}),r=Object(i.a)(n,2),s=r[0],c=r[1],l=function(){var n=Object(b.a)(p.a.mark((function n(a){var r,c,i,o;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),""!==s.username&&""!==s.email&&""!==s.password){n.next=3;break}return n.abrupt("return",e("Empty field/s","You have one or more empty fields.","red",3500));case 3:if(!/\W/g.test(s.username)){n.next=5;break}return n.abrupt("return",e("Username","The username can't include spaces or symbols.","red",3e3));case 5:if(y.a.isEmail(s.email)){n.next=7;break}return n.abrupt("return",e("Email","The email is invalid.","red",3e3));case 7:if(s.password===s.repeatPassword){n.next=9;break}return n.abrupt("return",e("Password","The password fields are not matching.","red",3e3));case 9:if(y.a.isStrongPassword(s.password,{minLength:8,minLowercase:1,minUppercase:1,minSymbols:1})){n.next=11;break}return n.abrupt("return",e("Password","The password must be with atleast: 8 Characters, 1 Lowercase, 1 Uppercase and 1 Symbol.","red",5e3));case 11:return r={email:s.email,username:s.username,password:s.password},c=new FormData,s.file.raw&&c.append("image",s.file.raw),c.append("body",JSON.stringify(r)),n.prev=15,n.next=18,x.a.post("/api/user/signup",c,{headers:{"Content-Type":"multipart/form-data"}});case 18:e("Success!","Signup was successful!","green",2e3),t.push("/login"),n.next=25;break;case 22:n.prev=22,n.t0=n.catch(15),e("Sorry!",(null===n.t0||void 0===n.t0||null===(i=n.t0.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"User validation failed","red",2e3);case 25:case"end":return n.stop()}}),n,null,[[15,22]])})));return function(e){return n.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"signup",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Signup to our community"}),Object(o.jsxs)("p",{children:["Have an account already? ",Object(o.jsx)(u.b,{to:"/login",children:"login now."})]})]}),Object(o.jsxs)("form",{children:[Object(o.jsx)(S,{name:"fileupload",values:s,whatToChange:"file",onChange:c,text:"Upload an avatar"}),Object(o.jsx)(C,{name:"username",label:"Username",type:"text",placeholder:"Enter a username",values:s,onChange:c,whatToChange:"username"}),Object(o.jsx)(C,{name:"email",label:"Email",type:"email",placeholder:"Enter your email",values:s,onChange:c,whatToChange:"email"}),Object(o.jsx)(C,{name:"password",label:"Password",type:"password",placeholder:"Enter a password",values:s,onChange:c,whatToChange:"password"}),Object(o.jsx)(C,{name:"repeatPassword",label:"Repeat Password",type:"password",placeholder:"Enter your password again",values:s,onChange:c,whatToChange:"repeatPassword"}),Object(o.jsx)(O,{text:"Signup",onClick:l})]})]})},P=n(17),_=n.n(P),F=n(16),L=(n(176),n(177),function(e){var t=e.name,n=e.label,a=e.placeholder,r=e.values,s=e.onChange,c=e.whatToChange,i=e.maxLength,l=e.rows;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{className:"label",htmlFor:t,children:n}),Object(o.jsx)("textarea",{className:"textarea",id:t,rows:l,placeholder:a,value:r[c],onChange:function(e){var t=Object(w.a)({},r);Array.isArray(c)?t[c[0]][c[1]][c[2]]=e.target.value:t[c]=e.target.value,s(t)},maxLength:i})]})}),E={sameDay:"HH:mm",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"},Y=function(e){var t,n,r=e.comment,s=e.setComments,c=e.setCommentsLength,l=Object(a.useContext)(d).user,j=Object(a.useState)(!1),h=Object(i.a)(j,2),m=h[0],g=h[1],O=Object(a.useState)({textarea:r.content}),f=Object(i.a)(O,2),v=f[0],C=f[1],N=function(){g((function(e){return!e})),C((function(e){var t=Object(w.a)({},e);return t.textarea=r.content,t}))},k=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:r._id,content:v.textarea},console.log(t),e.prev=2,e.next=5,x.a.patch("/api/comment/edit",t,{headers:{Authorization:"Bearer ".concat(l.get.token)}});case 5:s((function(e){var t=Object(F.a)(e);return t.find((function(e){return e._id===r._id})).content=v.textarea,t})),g((function(e){return!e})),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(b.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:r._id},e.prev=1,e.next=4,x.a.delete("/api/comment/delete",{headers:{Authorization:"Bearer ".concat(l.get.token)},data:t});case 4:s((function(e){return e.filter((function(e){return e!==r}))})),c((function(e){return e-1})),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(1);case 10:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"comment",children:[Object(o.jsx)("img",{src:"/api/user/avatar?username=".concat(r.user.username),alt:"Literally avatar"}),Object(o.jsxs)("div",{className:"details",children:[Object(o.jsxs)("div",{className:"meta",children:[Object(o.jsxs)("p",{children:[Object(o.jsx)(u.b,{to:"/profile/".concat(r.user.username),children:r.user.username}),Object(o.jsx)("span",{children:_()().calendar(function(){var e=r._id.toString().substring(0,8);return new Date(1e3*parseInt(e,16))}(),E)})]}),r.user._id===(null===(t=l.get)||void 0===t||null===(n=t.user)||void 0===n?void 0:n._id)&&Object(o.jsxs)("div",{className:"controls",children:[!m&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"material-icons red",onClick:y,children:"delete"}),Object(o.jsx)("span",{className:"material-icons blue",onClick:N,children:"edit"})]}),m&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"material-icons blue",onClick:k,children:"save"}),Object(o.jsx)("span",{className:"material-icons red",onClick:N,children:"cancel"})]})]})]}),Object(o.jsxs)("div",{className:"content",children:[!m&&Object(o.jsx)("p",{children:r.content}),m&&Object(o.jsx)(L,{name:"editcomment",label:"Edit your comment",placeholder:"Type your comment",values:v,onChange:C,whatToChange:"textarea",maxLength:"100",rows:"2"})]})]})]})},D=(n(178),function(e){var t=e.ingredient,n=e.index,r=Object(a.useState)(!1),s=Object(i.a)(r,2),c=s[0],l=s[1];return Object(o.jsxs)("div",{className:"ingredient-view",children:[Object(o.jsx)("span",{className:"number",onClick:function(){l((function(e){return!e}))},children:n+1}),(null===t||void 0===t?void 0:t.ingredient)?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"name".concat(c?" checked":""),children:t.ingredient.name}),Object(o.jsxs)("span",{className:"unit".concat(c?" checked":""),children:[" ","- ",t.amount," ",t.unit]})]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("span",{className:"name".concat(c?" checked":""),children:t.name}),Object(o.jsxs)("span",{className:"unit".concat(c?" checked":""),children:[" ","- ",t.amount," ",t.unit]})]})]})}),A=(n(179),function(e){var t=e.recipeID,n=e.setComments,r=e.setCommentsLength,s=Object(a.useContext)(d).user,c=Object(a.useState)({textarea:""}),l=Object(i.a)(c,2),u=l[0],j=l[1],h=function(){var e=Object(b.a)(p.a.mark((function e(){var a,c,i;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:t,content:u.textarea},e.prev=1,e.next=4,x.a.post("/api/comment/add",a,{headers:{Authorization:"Bearer ".concat(s.get.token)}});case 4:c=e.sent,i=c.data,n((function(e){var t=Object(F.a)(e);return t.unshift(i),t})),r((function(e){return e+1})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(1);case 12:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"new-comment",children:[Object(o.jsx)("h4",{children:"Add a new comment"}),Object(o.jsx)(L,{name:"newcomment",label:"",placeholder:"Type your comment",values:u,onChange:j,whatToChange:"textarea",maxLength:"100",rows:"3"}),Object(o.jsx)(O,{text:"Send",onClick:h})]})}),U=(n(180),function(e){var t,n,r=e.ratings,s=e.recipeID,c=e.setRecipe,l=e.owner,u=Object(a.useContext)(d),j=u.user,h=u.alertPopup,m=function(){return 0===r.length?0:r.reduce((function(e,t){return e+t.rating}),0)/r.length};j.get&&j.get.user._id!==l?(n=r.find((function(e){return e.user===j.get.user._id})))&&(t=n.rating):t=m();var g=Object(a.useState)(t),O=Object(i.a)(g,2),f=O[0],v=O[1],C=function(){var e=Object(b.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return",h("Unable to rate","You already rated this recipe.","red",2500));case 2:if(j.get){e.next=4;break}return e.abrupt("return",h("You are not logged in.","You are not connected to a user.\nPlease login or signup before.","red",2500));case 4:if(j.get.user._id!==l){e.next=6;break}return e.abrupt("return",h("Unable to rate","You can't rate your own recipe.","red",2500));case 6:return a={id:s,rating:t},e.prev=7,e.next=10,x.a.post("/api/recipe/rating",a,{headers:{Authorization:"Bearer ".concat(j.get.token)}});case 10:v(t),c((function(e){var n=Object(w.a)({},e);return n.rating.unshift({user:j.get.user._id,rating:t}),n})),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(7);case 16:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"rating",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h4",{children:0===r.length?"Be the first person to rate":"".concat(r.length," users already rated.")}),Object(o.jsx)("p",{children:j.get&&j.get.user._id===l?"Just wait, time make it better.":j.get?j.get&&n?"You are one of them.":j.get&&!n?"Maybe you next?":void 0:"Login or signup to rate."})]}),Object(o.jsxs)("div",{className:"stars",children:[Object(o.jsxs)("p",{children:["(",m(),"/5)"]}),Object(o.jsx)("span",{className:"material-icons star5".concat(f>4?" checked":""),onClick:function(){return C(5)},children:"star"}),Object(o.jsx)("span",{className:"material-icons star4".concat(f>3?" checked":""),onClick:function(){return C(4)},children:"star"}),Object(o.jsx)("span",{className:"material-icons star3".concat(f>2?" checked":""),onClick:function(){return C(3)},children:"star"}),Object(o.jsx)("span",{className:"material-icons star2".concat(f>1?" checked":""),onClick:function(){return C(2)},children:"star"}),Object(o.jsx)("span",{className:"material-icons star1".concat(f>0?" checked":""),onClick:function(){return C(1)},children:"star"})]})]})}),I=(n(181),function(e){var t=e.instruction,n=e.index;return Object(o.jsx)("div",{className:"step-view",children:Object(o.jsxs)("p",{children:[Object(o.jsxs)("span",{className:"number",children:["Step ",n+1]}),t.content]})})}),M=(n(182),{sameDay:"[Today]",nextDay:"[Tomorrow]",nextWeek:"dddd",lastDay:"[Yesterday]",lastWeek:"[Last] dddd",sameElse:"DD/MM/YYYY"}),R=function(){var e,t=Object(a.useContext)(d).user,n=Object(j.g)().recipeID,r=Object(a.useState)(null),s=Object(i.a)(r,2),c=s[0],l=s[1],h=Object(a.useState)([]),m=Object(i.a)(h,2),g=m[0],f=m[1],v=Object(a.useState)([]),w=Object(i.a)(v,2),C=w[0],N=w[1],k=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,a,r=arguments;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("reload"!==(r.length>0&&void 0!==r[0]?r[0]:"")){e.next=9;break}return e.next=4,x.a.get("/api/comment/get?id=".concat(c.comments,"&limit=0&skip=2"));case 4:t=e.sent,n=t.data,f(n),e.next=13;break;case 9:return e.next=11,x.a.get("/api/comment/get?id=".concat(c.comments,"&limit=").concat(g.length,"&skip=").concat(g.length+2));case 11:a=e.sent,f((function(e){return e.concat(a.data)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/recipe/get?id=".concat(n));case 2:t=e.sent,(a=t.data).recipe.ingredients.sort((function(e,t){return e.ingredient.name.length<t.ingredient.name.length?-1:e.ingredient.name.length>t.ingredient.name.length?1:0})),l(a.recipe),N(a.commentLength);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){c&&k("reload")}),[c]);return Object(o.jsx)("div",{className:"recipe",children:c&&Object(o.jsxs)("main",{children:[Object(o.jsx)("img",{className:"recipe--image",src:"/api/recipe/image?id=".concat(n),alt:"recipe img"}),Object(o.jsx)("h1",{children:c.title}),Object(o.jsx)("p",{className:"description",children:c.description}),Object(o.jsxs)("div",{className:"meta",children:[Object(o.jsxs)("div",{className:"user",children:[Object(o.jsx)("img",{src:"/api/user/avatar?username=".concat(c.owner.username,"&v=").concat(Date.now()),alt:"Literally avatar"}),Object(o.jsxs)("span",{children:["By"," ",Object(o.jsx)(u.b,{to:"/profile/".concat(c.owner.username),children:c.owner.username})]})]}),Object(o.jsx)("p",{children:c.updatedAt!==c.createdAt?"Updated at \n".concat(_()().calendar(c.updatedAt,M)):"Uploaded at \n".concat(_()().calendar(c.createdAt,M))})]}),Object(o.jsx)(U,{ratings:c.rating,recipeID:c._id,setRecipe:l,owner:c.owner._id}),Object(o.jsxs)("div",{className:"ingredients",children:[Object(o.jsx)("h3",{children:"Ingredients"}),Object(o.jsx)("p",{children:"Click on the number to check the ingredient."}),c.ingredients.map((function(e,t){return Object(o.jsx)(D,{ingredient:e,index:t},t)}))]}),Object(o.jsxs)("div",{className:"instructions",children:[Object(o.jsx)("h3",{children:"Instructions"}),Object(o.jsx)("p",{children:"Follow the steps carefully or you'll be sorry."}),c.instructions.map((function(e,t){return Object(o.jsx)(I,{instruction:e,index:t},t)}))]}),Object(o.jsxs)("div",{className:"comments",children:[Object(o.jsxs)("h3",{children:["Comments ",Object(o.jsxs)("span",{children:["(",C,")"]})]}),g&&g.map((function(e,t){return Object(o.jsx)(Y,{comment:e,setCommentsLength:N,setComments:f},t)})),g.length!==C&&Object(o.jsx)(O,{text:"Load More",onClick:k}),(null===(e=t.get)||void 0===e?void 0:e.user)&&Object(o.jsx)(A,{setCommentsLength:N,setComments:f,recipeID:c._id})]})]})})},B=(n(183),function(){var e=Object(a.useContext)(d).user,t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],s=n[1],c=Object(a.useState)([]),l=Object(i.a)(c,2),h=l[0],m=l[1],f=Object(a.useState)(null),v=Object(i.a)(f,2),w=v[0],C=v[1],N=Object(j.g)().username,k=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/user/recipes?id=".concat(r._id,"&limit=6&skip=").concat(h.length));case 2:t=e.sent,n=t.data,m((function(e){return e.concat(n.recipes)})),C(n.recipesLength);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/user/info?username=".concat(N));case 2:t=e.sent,n=t.data,s(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){r&&k()}),[r]),Object(o.jsx)(o.Fragment,{children:r&&Object(o.jsxs)("div",{className:"profile",children:[e.get&&e.get.user._id===r._id&&Object(o.jsx)(u.b,{to:"/dashboard",children:Object(o.jsxs)("div",{className:"dashboard-link",children:[Object(o.jsx)("span",{className:"material-icons",children:"manage_accounts"}),"Settings"]})}),Object(o.jsxs)("div",{className:"head",children:[Object(o.jsx)("img",{src:"/api/user/avatar?username=".concat(r.username,"&v=").concat(Date.now()),alt:""}),Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:r.username}),Object(o.jsxs)("p",{children:["Joined at ",_()(r.createdAt).format("MMM Do YYYY")]})]})]}),Object(o.jsxs)("p",{className:"score",children:["Score: ",Object(o.jsx)("span",{children:r.score})]}),Object(o.jsxs)("h2",{children:[r.username,"'s recipes"]}),Object(o.jsx)("div",{className:"grid-preview",children:h.map((function(e){return Object(o.jsx)(g,{recipe:e,noName:!0},e._id)}))}),w&&w>h.length&&Object(o.jsx)(O,{text:"Load More",onClick:k})]})})}),z=function(e){var t=e.sideNavbar,n=e.handleMenu,r=Object(a.useContext)(d),s=r.user,c=r.alertPopup,i=function(){var e=Object(b.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.post("/api/user/logout",{},{headers:{Authorization:"Bearer ".concat(s.get.token)}});case 3:s.set(null),c("Logged out!","User logged out!","green",3e3),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"navbar--side-bg",onClick:function(e){e.target.classList.contains("navbar--side-bg")&&n()},children:Object(o.jsxs)("div",{className:"navbar--side slide-animation",ref:t,children:[Object(o.jsx)("span",{className:"material-icons back",onClick:n,children:"arrow_back"}),Object(o.jsxs)(u.c,{to:"/",onClick:n,children:[Object(o.jsx)("span",{className:"material-icons yellow",children:"home"}),"Home"]}),Object(o.jsxs)(u.c,{to:"/recipes",onClick:n,children:[Object(o.jsx)("span",{className:"material-icons purple",children:"restaurant_menu"}),"Recipes"]}),!s.get&&Object(o.jsxs)(u.c,{to:"/login",onClick:n,children:[Object(o.jsx)("span",{className:"material-icons green",children:"login"}),"Login"]}),s.get&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)(u.c,{to:"/profile/".concat(s.get.user.username),onClick:n,children:[Object(o.jsx)("span",{className:"material-icons pink",children:"account_circle"}),"Profile"]}),Object(o.jsxs)(u.c,{to:"/add-recipe",onClick:n,children:[Object(o.jsx)("span",{className:"material-icons blue",children:"post_add"}),"Add Recipe"]}),Object(o.jsxs)(u.c,{to:"/",onClick:function(){i(),n()},children:[Object(o.jsx)("span",{className:"material-icons red",children:"logout"}),"Logout"]})]})]})})},W=(n(184),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useRef)(null),c=Object(j.f)(),l=function(){n?(s.current.classList.remove("slide-animation"),s.current.classList.add("slide-animation-back"),setTimeout((function(){r((function(e){return!e}))}),400)):r((function(e){return!e}))};return Object(o.jsxs)("nav",{className:"navbar",children:[Object(o.jsx)("div",{className:"navbar--left",children:Object(o.jsx)("span",{className:"material-icons",onClick:l,children:"menu"})}),Object(o.jsx)("div",{className:"navbar--center",children:Object(o.jsx)("img",{src:"/assets/logo.png",alt:"Our website logo",onClick:function(){c.push("/"),window.scrollTo(0,0)}})}),Object(o.jsx)("div",{className:"navbar--right",children:Object(o.jsx)(u.b,{to:"Search",children:Object(o.jsx)("span",{className:"material-icons",children:"search"})})}),n&&Object(o.jsx)(z,{sideNavbar:s,handleMenu:l})]})}),J=(n(185),n(186),function(e){var t=e.name,n=e.label,r=e.type,s=e.placeholder,c=e.values,l=e.onChange,d=e.whatToChange,u=e.whereToPush,j=function(e){var t,n=Object(w.a)({},c);n[d]=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"",l(n)},h=Object(a.useState)(!1),p=Object(i.a)(h,2),b=p[0],m=p[1],x=c[d];return Object(a.useEffect)((function(){x.length>=3?m(!0):m(!1)}),[x]),Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{className:"label",htmlFor:t,children:n}),Object(o.jsxs)("div",{className:"add-tag-input",children:[Object(o.jsx)("input",{id:t,className:"input",type:r,placeholder:c[u].length>=3?"You can add up to 3 tags":s,value:c[d],onChange:j,disabled:c[u].length>=3}),b&&Object(o.jsx)("span",{className:"material-icons",onClick:function(){var e=Object(w.a)({},c);e[u].push(c[d]),l(e),j(null)},children:"add_circle_outline"})]})]})}),H=(n(187),function(e){var t=e.name,n=e.values,a=e.whatToChange,r=e.onChange;return Object(o.jsxs)("div",{className:"tag-box",children:[t,Object(o.jsx)("span",{className:"material-icons",onClick:function(){var e=Object(w.a)({},n),s=e[a].findIndex((function(e){return e===t}));e[a].splice(s,1),r(e)},children:"clear"})]})}),q=(n(188),function(e){var t=e.ingredient,n=e.values,r=e.onChange,s=e.index,c=e.whatToFilter,i=Object(a.useContext)(d).alertPopup;return Object(o.jsxs)("div",{className:"ingredient-box",onClick:function(){if(n.ingredients.find((function(e){return e._id===t._id})))return i("Sorry","You have this ingredient already in your list.","yellow",3e3);var e=Object(w.a)({},n),a=Object(w.a)({},t);a.amount=0,a.unit="mg",e.ingredients=[].concat(Object(F.a)(e.ingredients),[a]),e.ingredientSearchTerm="",e[c].splice(s,1),r(e)},children:[t.name,Object(o.jsx)("span",{className:"material-icons",children:"check_box_outline_blank"})]})}),G=(n(189),function(e){var t=e.ingredient,n=e.values,r=e.onChange,s=e.index,c=Object(a.useState)(!0),l=Object(i.a)(c,2),d=l[0],u=l[1];return Object(o.jsxs)("div",{className:"ingredient-setting",children:[Object(o.jsxs)("div",{className:"ingredient-header",children:[Object(o.jsxs)("h4",{children:[s+1,". ",t.name,d&&Object(o.jsxs)("span",{className:"details",children:[" ","- ",n.ingredients[s].amount," ",n.ingredients[s].unit]})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("span",{className:"material-icons red",onClick:function(){var e=Object(w.a)({},n);e.ingredients.splice(s,1),r(e)},children:"clear"}),Object(o.jsx)("span",{className:"material-icons blue",onClick:function(){return u((function(e){return!e}))},children:d?"visibility":"visibility_off"})]})]}),!d&&Object(o.jsxs)("div",{className:"ingredient-grid",children:[Object(o.jsxs)("div",{className:"amount",children:[Object(o.jsx)("label",{className:"label",htmlFor:"amount".concat(s),children:"Amount"}),Object(o.jsx)("input",{id:"amount".concat(s),className:"input",type:"text",placeholder:"",value:n.ingredients[s].amount,onChange:function(e){var t=Object(w.a)({},n);t.ingredients[s].amount=e.target.value,r(t)}})]}),Object(o.jsxs)("div",{className:"unit",children:[Object(o.jsx)("label",{className:"label",htmlFor:"unit".concat(s),children:"Unit"}),Object(o.jsxs)("select",{id:"unit".concat(s),className:"dropdown",value:n.ingredients[s].unit,onChange:function(e){var t=Object(w.a)({},n);t.ingredients[s].unit=e.target.value,r(t)},children:[Object(o.jsx)("option",{value:"mg",children:"mg"}),Object(o.jsx)("option",{value:"g",children:"g"}),Object(o.jsx)("option",{value:"kg",children:"kg"}),Object(o.jsx)("option",{value:"ml",children:"ml"}),Object(o.jsx)("option",{value:"liters",children:"liters"}),Object(o.jsx)("option",{value:"whole",children:"whole"}),Object(o.jsx)("option",{value:"tsp",children:"tsp"}),Object(o.jsx)("option",{value:"tbsp",children:"tbsp"}),Object(o.jsx)("option",{value:"cup",children:"cups"})]})]})]})]})}),K=(n(190),function(e){var t=e.values,n=e.onChange,r=e.index,s=e.maxLength,c=e.rows,l=r>1,d=Object(a.useState)(l),u=Object(i.a)(d,2),j=u[0],h=u[1];return Object(o.jsxs)("div",{className:"step-textarea",children:[Object(o.jsxs)("label",{className:"label",htmlFor:"step".concat(r),children:["Step ",r+1,Object(o.jsxs)("div",{children:[r>1&&Object(o.jsx)("span",{className:"material-icons red",onClick:function(){var e=Object(w.a)({},t);e.steps.splice(r,1),n(e)},children:"clear"}),Object(o.jsx)("span",{className:"material-icons blue",onClick:function(){return h((function(e){return!e}))},children:j?"visibility":"visibility_off"})]})]}),!j&&Object(o.jsx)("textarea",{className:"textarea",id:"step".concat(r),rows:c,value:t.steps[r].content,onChange:function(e){var a=Object(w.a)({},t);a.steps[r].content=e.target.value,n(a)},maxLength:s})]})}),Z=(n(191),function(e){var t=e.values,n=Object(a.useContext)(d).user;return Object(o.jsx)("div",{className:"recipe preview",children:Object(o.jsxs)("main",{children:[Object(o.jsx)("img",{className:"recipe--image",src:t.file.preview,alt:"recipe img"}),Object(o.jsx)("h1",{children:t.title}),Object(o.jsx)("p",{className:"description",children:t.description}),Object(o.jsxs)("div",{className:"meta",children:[Object(o.jsxs)("div",{className:"user",children:[Object(o.jsx)("img",{src:"https://yt3.ggpht.com/ytc/AAUvwngw35YY8vYI86RTOoEGafSxEjghjzTcKw3LbMyZ=s900-c-k-c0x00ffffff-no-rj",alt:"Literally avatar"}),Object(o.jsxs)("span",{children:["By ",Object(o.jsx)(u.b,{to:" #",children:n.get.user.username})]})]}),Object(o.jsx)("p",{children:"Uploaded at Today"})]}),Object(o.jsxs)("div",{className:"ingredients",children:[Object(o.jsx)("h3",{children:"Ingredients"}),Object(o.jsx)("p",{children:"Click on the number to check the ingredient."}),t.ingredients.map((function(e,t){return Object(o.jsx)(D,{ingredient:e,index:t},t)}))]}),Object(o.jsxs)("div",{className:"instructions",children:[Object(o.jsx)("h3",{children:"Instructions"}),Object(o.jsx)("p",{children:"Follow the steps carefully or you'll be sorry."}),t.steps.map((function(e,t){return Object(o.jsx)(I,{instruction:e,index:t},t)}))]})]})})}),Q=function(){var e=Object(a.useContext)(d),t=e.user,n=e.alertPopup,r=Object(a.useState)(0),s=Object(i.a)(r,2),c=s[0],l=s[1],u=Object(j.f)(),h=Object(a.useState)({title:"",description:"",steps:[{content:""},{content:""}],ingredients:[],ingredientSearch:"",ingredientsFounded:[],tagInput:"",tags:[],file:{raw:null,preview:null}}),m=Object(i.a)(h,2),g=m[0],f=m[1],v=function(e){if("increase"===e){switch(c){case 0:if(""===g.title||""===g.description||null===g.file.raw)return n("Empty field/s","You have one or more empty fields.","red",2500);0===g.tags.length&&n("Suggestion","We suggesting you to add at least one tag.","yellow",3e3);break;case 1:if(g.ingredients.length<2)return n("No ingredients added","You have to add at least 2 ingredients.","red",2500);if(g.ingredients.some((function(e){return 0===e.amount||"0"===e.amount})))return n("Missing amount","One or more of your ingredients missing amount field.","red",2500);break;case 2:if(g.steps.some((function(e){return 0===e.content.length})))return n("Missing instructions","One or more of the steps is missing.\nDelete one or add text.","red",2500)}l((function(e){return e+1}))}else"decrease"===e&&l((function(e){return e-1}))};Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/ingredient/search?value=".concat(g.ingredientSearch));case 2:t=e.sent,n=t.data,a=Object(w.a)({},g),r=n.filter((function(e){return!g.ingredients.find((function(t){return t._id===e._id}))})),a.ingredientsFounded=r,f(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=setTimeout((function(){g.ingredientSearch&&e()}),500);return function(){clearTimeout(t)}}),[g.ingredientSearch]);var N=function(){var e=Object(b.a)(p.a.mark((function e(){var n,a,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={title:g.title,description:g.description,tags:g.tags,instructions:g.steps,ingredients:[]},g.ingredients.forEach((function(e){n.ingredients.push({ingredient:e._id,amount:e.amount,unit:e.unit})})),(a=new FormData).append("image",g.file.raw),a.append("body",JSON.stringify(n)),e.prev=5,e.next=8,x.a.post("/api/recipe/add",a,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t.get.token)}});case 8:r=e.sent,s=r.data,u.push("/recipe/".concat(s._id)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.dir(e.t0);case 16:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"add-recipe",children:[Object(o.jsx)("h1",{children:"Add a new recipe"}),0===c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("p",{children:["You can share your recipes with our community.",Object(o.jsx)("br",{}),"Use the best image and title you can for more exposure."]}),Object(o.jsx)(S,{name:"fileupload",values:g,whatToChange:"file",onChange:f,text:"Upload an image"}),Object(o.jsx)(C,{name:"title",label:"Title",type:"text",placeholder:"The recipe title",values:g,onChange:f,whatToChange:"title"}),Object(o.jsx)(L,{name:"description",label:"description",placeholder:"How can you describe this recipe the best way?",onChange:f,values:g,whatToChange:"description",maxLength:"160",rows:"3"}),Object(o.jsx)(J,{name:"tag",label:"Add tags (up to 3)",type:"text",placeholder:"Users can find your recipe using tags",values:g,whatToChange:"tagInput",whereToPush:"tags",onChange:f}),Object(o.jsx)("div",{className:"tags-container",children:g.tags.map((function(e,t){return Object(o.jsx)(H,{name:e,values:g,whatToChange:"tags",onChange:f},t)}))}),Object(o.jsx)("div",{className:"buttons",children:Object(o.jsx)(O,{text:"Next Page",onClick:function(){return v("increase")}})})]}),1===c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{children:"Add all the ingredients used for your recipe."}),Object(o.jsx)(C,{name:"ingredientSearch",label:"Search ingredient",type:"text",placeholder:"Ingredient name",values:g,onChange:f,whatToChange:"ingredientSearch"}),g.ingredientsFounded.map((function(e,t){return Object(o.jsx)(q,{index:t,ingredient:e,values:g,onChange:f,whatToChange:"ingredients",whatToFilter:"ingredientsFounded"},e._id)})),Object(o.jsxs)("h3",{className:"heading-tertiary",children:["Your ingredients ",Object(o.jsxs)("span",{children:["(",g.ingredients.length,")"]})]}),g.ingredients.map((function(e,t){return Object(o.jsx)(G,{ingredient:e,index:t,values:g,onChange:f},e._id)})),Object(o.jsxs)("div",{className:"buttons",children:[Object(o.jsx)(O,{text:"Previous Page",onClick:function(){return v("decrease")}}),Object(o.jsx)(O,{text:"Next Page",onClick:function(){return v("increase")}})]})]}),2===c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("p",{children:"Add all the instructions for the recipe"}),Object(o.jsxs)("p",{className:"add-step",onClick:function(){var e=Object(w.a)({},g);e.steps=[].concat(Object(F.a)(g.steps),[{content:""}]),f(e)},children:["Add Step",Object(o.jsx)("span",{className:"material-icons",children:"add_circle"})]}),g.steps.map((function(e,t){return Object(o.jsx)(K,{values:g,onChange:f,index:t,maxLength:"1200",rows:"3"},t)})),Object(o.jsxs)("div",{className:"buttons",children:[Object(o.jsx)(O,{text:"Previous Page",onClick:function(){return v("decrease")}}),Object(o.jsx)(O,{text:"Preview",onClick:function(){return v("increase")}})]})]}),3===c&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("p",{children:["Look how your recipe will look like. ",Object(o.jsx)("br",{}),"Check if you need to fix something."]}),Object(o.jsx)(Z,{values:g}),Object(o.jsxs)("div",{className:"buttons",children:[Object(o.jsx)(O,{text:"Previous Page",onClick:function(){return v("decrease")}}),Object(o.jsx)(O,{text:"Send",onClick:N})]})]})]})},V=(n(192),function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)([]),c=Object(i.a)(s,2),l=c[0],d=c[1],u=function(){var e=Object(b.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/recipe/recent?limit=5&skip=".concat(n.length));case 2:t=e.sent,a=t.data,r((function(e){return e.concat(a.recipes)})),d(a.recipesLength);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){u()}),[]),Object(o.jsxs)("div",{className:"all-recipes",children:[Object(o.jsx)("h2",{children:"All Recipes"}),n.map((function(e){return Object(o.jsx)(g,{recipe:e},e._id)})),l&&l>n.length&&Object(o.jsx)(O,{text:"Load More",onClick:u})]})}),X=(n(193),function(e){var t=e.name,n=e.label,a=e.values,r=e.onChange,s=e.whatToChange,c=e.options,i=e.group;return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("label",{className:"label",htmlFor:t,children:n}),Object(o.jsxs)("select",{id:t,className:"dropdown",onChange:function(e){var t=Object(w.a)({},a);t[s]=e.target.value,r(t)},children:[i&&Object(o.jsx)("optgroup",{label:i,children:c.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))}),!i&&c.map((function(e,t){return Object(o.jsx)("option",{value:e,children:e},t)}))]})]})}),$=(n(194),function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(!1),c=Object(i.a)(s,2),l=c[0],d=c[1],u=Object(a.useState)([]),j=Object(i.a)(u,2),h=j[0],m=j[1],f=Object(a.useState)(null),v=Object(i.a)(f,2),N=v[0],k=v[1],y=Object(a.useState)({}),S=Object(i.a)(y,2),T=S[0],P=S[1],_=Object(a.useState)({basic:"",parameter:"Title",ingredientSearch:"",ingredientsFounded:[],ingredients:[],title:"",tags:""}),F=Object(i.a)(_,2),L=F[0],E=F[1],Y=function(){r((function(e){return!e})),E((function(e){var t=Object(w.a)({},e);return t.ingredientsFounded=[],t.ingredientSearch="",t.ingredients=[],t.basic="",t.parameter="Title",t.tags="",t}))};Object(a.useEffect)((function(){var e=function(){var e=Object(b.a)(p.a.mark((function e(){var t,n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/ingredient/search?value=".concat(L.ingredientSearch));case 2:t=e.sent,n=t.data,a=Object(w.a)({},L),r=n.filter((function(e){return!L.ingredients.find((function(t){return t._id===e._id}))})),a.ingredientsFounded=r,E(a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=setTimeout((function(){L.ingredientSearch&&e()}),500);return function(){clearTimeout(t)}}),[L.ingredientSearch]);var D=function(e){var t=Object(w.a)({},L);t.ingredients=t.ingredients.filter((function(t){return t._id!==e})),E(t)},A=function(){var e=Object(b.a)(p.a.mark((function e(t){var a,r,s,c,i,o,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},"new"===t?n?(""!==L.title&&(a.title=L.title),""!==L.tags&&(c=L.tags.split(","),a.tags=c),L.ingredients.length>0&&(i=[],L.ingredients.forEach((function(e){return i.push(e._id)})),a.ingredients=i)):"Title"===L.parameter?a.title=L.basic:"Tags"===L.parameter?(r=L.basic.split(","),a.tags=r):"Ingredients"===L.parameter&&(s=[],L.ingredients.forEach((function(e){return s.push(e._id)})),a.ingredients=s):"more"===t&&(a=Object(w.a)({},T)),E((function(e){var t=Object(w.a)({},e);return t.ingredientsFounded=[],t})),a.limit=6,P(a),"new"===t?a.skip=0:"more"===t&&(a.skip=h.length),e.prev=6,e.next=9,x.a.get("/api/recipe/searchIngredient",{params:a});case 9:o=e.sent,u=o.data,"new"===t?(k(u.recipesLength),m(u.recipes),P(a)):"more"===t&&m((function(e){return e.concat(u.recipes)})),l||d((function(e){return!e})),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(6);case 17:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"search",children:[!n&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Search for recipes"}),Object(o.jsxs)("p",{children:["Want a more specific search?"," ",Object(o.jsx)("span",{onClick:Y,children:"Click for advanced search."})]})]}),Object(o.jsxs)("div",{className:"basic",children:[Object(o.jsxs)("div",{className:"input-container",children:["Ingredients"!==L.parameter&&Object(o.jsx)(C,{name:"title",label:"Title"===L.parameter?"Free text":"Tags"===L.parameter?"Tags separated by comma ( , )":void 0,type:"text",placeholder:"Enter ".concat(L.parameter),values:L,onChange:E,whatToChange:"basic"}),"Ingredients"===L.parameter&&Object(o.jsx)(C,{name:"ingredientSearch",label:"Search ingredient",type:"text",placeholder:"Enter ingredient name",values:L,onChange:E,whatToChange:"ingredientSearch"})]}),Object(o.jsx)("div",{className:"dropdown-container",children:Object(o.jsx)(X,{name:"parameter",label:"Parameter",values:L,onChange:E,whatToChange:"parameter",options:["Title","Tags","Ingredients"]})})]}),"Ingredients"===L.parameter&&L.ingredients.length>0&&Object(o.jsxs)("div",{className:"ingredients-selected",children:[Object(o.jsx)("h3",{children:"Selected:"}),L.ingredients.map((function(e,t){return Object(o.jsxs)("span",{className:"selected",children:[e.name,Object(o.jsx)("span",{className:"material-icons",onClick:function(){return D(e._id)},children:"clear"})]},t)}))]}),"Ingredients"===L.parameter&&Object(o.jsx)("div",{className:"ingredientsFounded",children:L.ingredientsFounded.map((function(e,t){return Object(o.jsx)(q,{index:t,ingredient:e,values:L,onChange:E,whatToChange:"ingredients",whatToFilter:"ingredientsFounded"},e._id)}))})]}),n&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Advanced search for recipes"}),Object(o.jsxs)("p",{children:["Want a less specific search?"," ",Object(o.jsx)("span",{onClick:Y,children:"Click for simple search."})]})]}),Object(o.jsx)(C,{name:"title",label:"Title",type:"text",placeholder:"Enter Title",values:L,onChange:E,whatToChange:"title"}),Object(o.jsx)(C,{name:"tags",label:"Tags separated by comma ( , )",type:"text",placeholder:"Enter Tags",values:L,onChange:E,whatToChange:"tags"}),Object(o.jsx)(C,{name:"ingredientSearch",label:"Search ingredient",type:"text",placeholder:"Enter ingredient name",values:L,onChange:E,whatToChange:"ingredientSearch"}),L.ingredients.length>0&&Object(o.jsxs)("div",{className:"ingredients-selected",children:[Object(o.jsx)("h3",{children:"Selected:"}),L.ingredients.map((function(e,t){return Object(o.jsxs)("span",{className:"selected",children:[e.name,Object(o.jsx)("span",{className:"material-icons",onClick:function(){return D(e._id)},children:"clear"})]},t)}))]}),Object(o.jsx)("div",{className:"ingredientsFounded",children:L.ingredientsFounded.map((function(e,t){return Object(o.jsx)(q,{index:t,ingredient:e,values:L,onChange:E,whatToChange:"ingredients",whatToFilter:"ingredientsFounded"},e._id)}))})]}),Object(o.jsx)(O,{text:"Search",onClick:function(){return A("new")}}),l&&Object(o.jsxs)(o.Fragment,{children:[0===h.length&&Object(o.jsx)("h2",{children:"Sorry but not recipes found."}),h.length>0&&Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("h2",{children:[N," recipes founded."]}),Object(o.jsx)("div",{className:"grid-preview",children:h.map((function(e,t){return Object(o.jsx)(g,{recipe:e,noName:!0},t)}))})]}),0!==N&&N>h.length&&Object(o.jsx)(O,{text:"Load More",onClick:function(){return A("more")}})]})]})}),ee=(n(195),function(){var e=Object(a.useContext)(d),t=e.user,n=e.alertPopup,r=Object(a.useState)(null),s=Object(i.a)(r,2),c=s[0],l=s[1],u=Object(j.f)();Object(a.useEffect)((function(){t.get&&l({username:t.get.user.username,email:t.get.user.email,oldPassword:"",newPassword:"",newRepeatPassword:"",file:{raw:null,preview:"/api/user/avatar?username=".concat(t.get.user.username,"&v=").concat(Date.now())}})}),[]);var h=function(){var e=Object(b.a)(p.a.mark((function e(a){var r,s,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),c.username!==t.get.user.username||c.email!==t.get.user.email||""!==c.newPassword||""!==c.newRepeatPassword||c.file.raw){e.next=3;break}return e.abrupt("return",n("Nothing changed","You changed nothing.","red",3500));case 3:if(""!==c.oldPassword){e.next=5;break}return e.abrupt("return",n("Password","Old password is required to all updates.","red",3500));case 5:if(""===c.newPassword||c.newPassword===c.newRepeatPassword){e.next=7;break}return e.abrupt("return",n("Password","New password fields doesn't match.","red",3500));case 7:if(""===c.newPassword||c.newPassword!==c.oldPassword){e.next=9;break}return e.abrupt("return",n("Password","Old password and new password are the same.","red",3500));case 9:if(""===c.newPassword||y.a.isStrongPassword(c.newPassword,{minLength:8,minLowercase:1,minUppercase:1,minSymbols:1})){e.next=11;break}return e.abrupt("return",n("Password","The password must be with atleast: 8 Characters, 1 Lowercase, 1 Uppercase and 1 Symbol.","red",5e3));case 11:if(c.username===t.get.user.username||!/\W/g.test(c.username)){e.next=13;break}return e.abrupt("return",n("Username","The username can't include spaces or symbols.","red",3e3));case 13:if(c.email===t.get.user.email||y.a.isEmail(c.email)){e.next=15;break}return e.abrupt("return",n("Email","The email is invalid.","red",3e3));case 15:return r={},c.username!==t.get.user.username&&(r.username=c.username),c.email!==t.get.user.email&&(r.email=c.email),""!==c.newPassword&&(r.newPassword=c.newPassword),r.oldPassword=c.oldPassword,s=new FormData,c.file.raw&&s.append("image",c.file.raw),s.append("body",JSON.stringify(r)),e.prev=23,e.next=26,x.a.patch("/api/user/update",s,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(t.get.token)}});case 26:i=e.sent,o=i.data,t.set((function(e){var t=Object(w.a)({},e);return t.user=o,t})),n("Updated!","User data updated successfully!","green",3e3),u.push("/profile/".concat(c.username)),e.next=36;break;case 33:e.prev=33,e.t0=e.catch(23),n("Not updated!","There was a problem updating your data.","red",3e3);case 36:case"end":return e.stop()}}),e,null,[[23,33]])})));return function(t){return e.apply(this,arguments)}}();return Object(o.jsxs)("div",{className:"dashboard",children:[Object(o.jsxs)("div",{className:"header",children:[Object(o.jsx)("h1",{children:"Dashboard"}),Object(o.jsxs)("p",{children:["Change your user data how you like.",Object(o.jsx)("br",{}),"All updates must include your ",Object(o.jsx)("span",{children:"old password"}),"."]})]}),c&&Object(o.jsxs)("form",{children:[Object(o.jsx)(S,{name:"fileupload",values:c,whatToChange:"file",onChange:l,text:"Upload an avatar"}),Object(o.jsx)(C,{name:"username",label:"Enter username",type:"text",placeholder:"username",values:c,onChange:l,whatToChange:"username"}),Object(o.jsx)(C,{name:"email",label:"email",type:"email",placeholder:"Enter username",values:c,onChange:l,whatToChange:"email"}),Object(o.jsx)(C,{name:"oldpassword",label:"old password (required)",type:"password",placeholder:"Enter old password",values:c,onChange:l,whatToChange:"oldPassword"}),Object(o.jsx)(C,{name:"newpassword",label:"new password",type:"password",placeholder:"Enter new password",values:c,onChange:l,whatToChange:"newPassword"}),Object(o.jsx)(C,{name:"newrepeatpassword",label:"Repeat new password",type:"password",placeholder:"Enter new password again",values:c,onChange:l,whatToChange:"newRepeatPassword"}),Object(o.jsx)(O,{text:"Update",onClick:h})]})]})}),te=function(){return Object(o.jsxs)(u.a,{children:[Object(o.jsx)(W,{}),Object(o.jsxs)(j.c,{children:[Object(o.jsx)(j.a,{path:"/",exact:!0,children:Object(o.jsx)(v,{})}),Object(o.jsx)(j.a,{path:"/login",exact:!0,children:Object(o.jsx)(N,{})}),Object(o.jsx)(j.a,{path:"/signup",exact:!0,children:Object(o.jsx)(T,{})}),Object(o.jsx)(j.a,{path:"/recipe/:recipeID",exact:!0,children:Object(o.jsx)(R,{})}),Object(o.jsx)(j.a,{path:"/recipes",exact:!0,children:Object(o.jsx)(V,{})}),Object(o.jsx)(j.a,{path:"/add-recipe/",exact:!0,children:Object(o.jsx)(Q,{})}),Object(o.jsx)(j.a,{path:"/profile/:username",exact:!0,children:Object(o.jsx)(B,{})}),Object(o.jsx)(j.a,{path:"/search",exact:!0,children:Object(o.jsx)($,{})}),Object(o.jsx)(j.a,{path:"/dashboard",exact:!0,children:Object(o.jsx)(ee,{})})]})]})};var ne=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(a.useState)(null),c=Object(i.a)(s,2),u=c[0],j=c[1],h=Object(a.useState)(null),p=Object(i.a)(h,2),b=p[0],m=p[1],x={user:{get:n,set:r},recentRecipes:{get:u,set:j},alertPopup:function(e,t,n,a){m({header:e,text:t,type:n}),setTimeout((function(){m(null)}),a)}};return Object(o.jsx)("div",{className:"App",children:Object(o.jsxs)(d.Provider,{value:x,children:[b&&Object(o.jsx)(l,{details:b}),Object(o.jsx)(te,{})]})})};n(196);c.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(ne,{})}),document.getElementById("root"))},60:function(e,t,n){},81:function(e,t,n){},90:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},95:function(e,t,n){},96:function(e,t,n){}},[[197,1,2]]]);
//# sourceMappingURL=main.bae0e5cf.chunk.js.map